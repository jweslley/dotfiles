#!/usr/bin/env python

# pomodoro
# Author:   Jonhnny Weslley <jonhnnyweslley@jonhnnyweslley.net>
# Modified: Nov 01, 2009

import sys, pynotify
from optparse import OptionParser

# default time values to pomodoro technique (http://www.pomodorotechnique.com/)
POMODORO_TIME = 25 * 60     # 25 minutes
SHORT_BREAK_TIME = 5 * 60   #  5 minutes
LONGER_BREAK_TIME = 15 * 60 # 15 minutes


SHORT_BREAK = 0
LONGER_BREAK = 1
break_time = [SHORT_BREAK_TIME, LONGER_BREAK_TIME]
break_msg = [
  ":) Take a short break (3-5 minutes)",
  ":D Take a longer break (15-30 minutes)"]

def waitAndNotify(waitTime, notifyMsg):
  time.sleep(waitTime)
  pynotify.Notification("Pomodoro", notifyMsg).show()

if __name__ == '__main__' :
  if not pynotify.init("summary-only"):
    sys.exit(1)

  parser = OptionParser()
  parser.add_option(
      "-l", "--longer", dest="longer", action="store_true", default=False,
      help="schedule a pomodoro with a longer break")
  (options, args) = parser.parse_args(sys.argv)

  type = LONGER_BREAK if options.longer else SHORT_BREAK
  waitAndNotify(POMODORO_TIME, break_msg[type])
  waitAndNotify(break_time[type], "Back to work on the previous task or pick another one to do")
