#!/usr/bin/env python

# tree
# Author:   Jonhnny Weslley
# Modified: May 31, 2008

import os, sys
from optparse import OptionParser

def tree(dirname, onlyDirs, acum = ""):
  print acum + "\033[01;01m+\033[01;0m \033[01;34m" + os.path.basename(dirname) + "\033[01;0m"
  subdirs = []
  children = os.listdir(dirname)
  for child in children:
    fChild = os.path.join(dirname, child)
    if os.path.isdir(fChild):
      subdirs.append(fChild)
    elif not onlyDirs:
      print acum + "|  " + child

  for subdir in subdirs:
    tree(subdir, onlyDirs, acum + "|  ")



if __name__ == '__main__' :
  parser = OptionParser()
  parser.add_option("-d", "--only-directory", dest="onlydirs", action="store_true", default=False, help="show only directories")
  (options, args) = parser.parse_args(sys.argv)

  if len(args) > 1:
    dirname = args[1]
  else:
    dirname = '.'

  if not os.path.exists(dirname):
    print dirname + " not exists"
  elif not os.path.isdir(dirname):
    print dirname + " is not a directory"
  else:
    tree(dirname, options.onlydirs)

